# ==============================================================================
# GlocalText Configuration File
#
# This file controls the translation tasks for UtilKit.sh script localization.
# ==============================================================================

# ------------------------------------------------------------------------------
#  1. Provider Settings
# ------------------------------------------------------------------------------
providers:
    # The 'google' provider uses the deep-translator library
    google: {}

# ------------------------------------------------------------------------------
#  2. Shortcuts: For reusable configuration
# ------------------------------------------------------------------------------
shortcuts:
    # Default settings inherited by all tasks
    .defaults:
        translator: google
        source_lang: zh-TW
        incremental: true
        source:
            include:
                - sh/utilkit.sh
        extraction_rules:
            - (?:Txt|Err|Ask|Task)\s"(.*?)"
        output:
            in_place: false

        # Reusable ruleset for protecting shell variables and syntax
    .shell_protection:
        rules:
            protect:
                - \$\w+
                - \$\{[^}]+\}
                - \$\([^)]+\)
            skip:
                - \$\{status_ChkDeps\}\\t\$\{dep_ChkDeps\}
                - \$\{VERSION_ID\}
                - \$\{ID\}
                - \$\{NAME\} \$\(cat /etc/debian_version\)
                - \$\{PRETTY_NAME\}
                - \$\{cpu_freq_CpuFreq\} GHz
                - \$\{cpu_usage_CpuUsage\}
                - \$\{SCRIPTS\} \$\{VERSION\}
                - Copyright \(C\) \$\(date \+%Y\) \$\{AUTHORS\}\.
                - \$\{usd_DiskUsage\}
                - \$\{tot_DiskUsage\}
                - \$\{pct_DiskUsage\}
                - \$\(ConvSz \$\{usd_DiskUsage\}\) / \$\(ConvSz \$\{tot_DiskUsage\}\) \(\$\{pct_DiskUsage\}%\)
                - \$\{ipv4_servers_DnsAddr\[\*\]\}
                - \$\{ipv6_servers_DnsAddr\[\*\]\}
                - \$\{ipv4_servers_DnsAddr\[\*\]\}   \$\{ipv6_servers_DnsAddr\[\*\]\}
                - \$\{font_style_Font\}\$\{1\}\$\{CLR0\}
                - \$\{val_Format\}
                - \$\{res_Format\}
                - \$\{url_Get\}
                - \$\{prompt_msg_Ask\}
                - \$\{i\}
                - \$\{interface_Iface\}
                - \$\{rx_bytes_Iface\}
                - \$\{rx_packets_Iface\}
                - \$\{rx_drop_Iface\}
                - \$\{tx_bytes_Iface\}
                - \$\{tx_packets_Iface\}
                - \$\{tx_drop_Iface\}
                - \$\{ipv4_addr_IpAddr\}
                - \$\{ipv6_addr_IpAddr\}
                - IPv4: \$\{ipv4_addr_IpAddr\}
                - IPv6: \$\{ipv6_addr_IpAddr\}
                - \$\{data_LastUpd\}
                - \$\{data_Loc\}
                - \$\{data_MacAddr\}
                - \$\{usd_MemUsage\}
                - \$\{tot_MemUsage\}
                - \$\{pct_MemUsage\}
                - \$\(ConvSz \$\{usd_MemUsage\}\) / \$\(ConvSz \$\{tot_MemUsage\}\) \(\$\{pct_MemUsage\}%\)
                - \$\{data_NetProv\}
                - \$\{data_PkgCnt\}
                - \\n\$\{cmd_oup_Prog\}
                - \$\{data_PubIp\}
                - \$\{CLR8\}\$\{DLINE\}\$\{CLR0\}
                - \$1
                - Bash \$\{BASH_VERSION\}
                - Zsh \$\{ZSH_VERSION\}
                - \$\{usd_SwapUsage\}
                - \$\{tot_SwapUsage\}
                - \$\{pct_SwapUsage\}
                - \$\(ConvSz \$\{usd_SwapUsage\}\) / \$\(ConvSz \$\{tot_SwapUsage\}\) \(\$\{pct_SwapUsage\}%\)
                - \$\{data_TimeZn\}
                - \$\{CLR1\}\$\(cat \$\{tmp_file_Task\}\)\$\{CLR0\}

# ------------------------------------------------------------------------------
#  3. Tasks: The core translation jobs
# ------------------------------------------------------------------------------
tasks:
    # -------------------------------------------------------------------------
    # Task 1: Translate to English
    # -------------------------------------------------------------------------
    - name: UtilKit.sh - en
      task_id: 3f000845-692c-51e1-9796-749a0ba256aa
      enabled: true
      extends: .defaults
      target_lang: en
      cache_path: sh/localized/en
      extraction_rules:
          - (?:Txt|Err|Ask|Task)\s"(.*?)"
          - virt_typ_ChkVirt="(未知)"
          - LC_ALL=C printf "%.2f, %.2f, %.2f \((%d 核心)\)"
          - status_ChkDeps="(.*?)"
      output:
          in_place: false
          path: sh/localized/en
      rules:
          extends: .shell_protection
          replace:
              未知: Unknown
              uptime -p \| sed -E 's/\^up //; s/ year\[s\]\?/ 年/g; s/ week\[s\]\?/ 週/g; s/ day\[s\]\?/ 天/g; s/ hour\[s\]\?/ 小時/g; s/ minute\[s\]\?/ 分鐘/g; s/, /，/g': uptime -p | sed 's/up //'
              who: are
              '%d 核心': '%d cores'
              \$\{CLR2\}［可用］\$\{CLR0\}: ${CLR2}[Available]${CLR0}
              \$\{CLR1\}［缺失］\$\{CLR0\}: ${CLR1}[Not found]${CLR0}

    - name: UtilKit.sh - zh-CN
      task_id: fed7ded1-b2fb-5007-a93d-b3245bef9644
      enabled: true
      extends: .defaults
      target_lang: zh-CN
      cache_path: sh/localized/zh-CN
      output:
          in_place: false
          path: sh/localized/zh-CN
      rules:
          extends: .shell_protection
          replace:
              who -b \| awk '\{print \$3, \$4\}' \| sed -E 's/\(\[0-9\]\{4\}\)-\(\[0-9\]\{2\}\)-\(\[0-9\]\{2\}\) \(\[0-9\]\{2\}\):\(\[0-9\]\{2\}\)/\1 年 \2 月 \3 日 \4 點 \5 分/': who -b | awk '{print $3, $4}' | sed -E 's/([0-9]{4})-([0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2})/\1 年 \2 月 \3 日 \4 点 \5 分/'

    - name: UtilKit.sh - zh-TW
      task_id: ad2cabf3-01f3-5f1d-b1de-e59a421ba7e6
      enabled: true
      extends: .defaults
      target_lang: zh-TW
      cache_path: sh/localized/zh-TW
      output:
          in_place: false
          path: sh/localized/zh-TW
      rules:
          extends: .shell_protection
